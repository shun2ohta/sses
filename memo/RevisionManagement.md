## GitHub Desktop の基本的な使いかた

公開: 2025-02-12 10:31:44


GitHub Desktop というアプリケーションがあり、これでもリポジトリの履歴を管理することができます。具体的には、「History」タブを見ると、どんな変更をしたのかふりかえることが可能で、メニューから選んだり、右クリック（ダブルタップ）して、やりたいことを選ぶだけです。このドキュメントは、すでに<ins>リポジトリを作成し、main に Commit、Push までを行ったことがある</ins>人が次の段階に進むためにあります。

GitHub Desktop を使えばコマンドを覚えなくても直感的に操作でき、**基本的なブランチ管理から Pull Request 作成まで**といった一連の過程も実現できます。慣れてくると、GUIはいちいち面倒で、煩わしく感じてくるものですが、まずは GitHub Desktop を使うことをお勧めします。以下の手順の概略を実践しながら理解するとよいです。


### 1. GitHub Desktop を使った履歴管理の概略と手順

1. ブランチを作成します
	-	GitHub Desktop を開きます
	-	左上のブランチメニューをクリック
	-	「New Branch…」を選択 → ブランチ名を入力
	-	「Create Branch」を押します

	**ポイント** － main から新しい作業ブランチをつくる（「ブランチを切る」と呼ぶことが多いです）ことで、main を直接変更せずに済みます。


2. 変更を加えて Commit します
	-	コードを編集（CotEditor, VSCode などで開く）します
	-	GitHub Desktop に戻ると、変更が自動で検出されます
	-	変更を確認し、「Summary」にコミットメッセージを入力します
	-	「Commit to ブランチ名」をクリックします

	**ポイント** － Commit は「ローカル保存」なので、まだ GitHub には反映されていない状態です。


3. GitHub に Push します
	-	上部の「Push origin」ボタンをクリックします
	-	GitHub にブランチがアップロードされます

	**ポイント** － Push すると、GitHub に変更が送信されますが、まだ main には反映されていません。


4. GitHub で Pull Request を作成します
	-	GitHub Desktop の 「Create Pull Request」ボタンをクリック → すると GitHub の Pull Request ページが開きます
	-	「Title」と「Description」を記入します
	-	「Create Pull Request」 をクリックします

	**ポイント** － Pull Request をつくる（プルリクを送る、プルリクを出す、と呼ぶことが多いです）ことで、変更を安全にレビューしてから main にマージできます。


5. Pull Request をレビューして main にマージします
	-	GitHub上で、変更を確認します
	-	問題がなければ、「Merge pull request」をクリックします
	-	「Delete branch」 を押して、使い終わったブランチを削除します

	**ポイント** － 用が済んだら、ブランチは捨てるほうがよいです。すでに main に取り込まれたブランチは不要なので、削除する方が管理しやすく、もし必要ならば、最新の main から新しいブランチを作成する方が安全で確実だからです（旧いブランチに最新のメインの状態を反映させることもできますが、ここでは省略します）。もちろん、当面の間、コミットする予定があるのであれば、ブランチを都度捨てる必要はありません。


6. ローカルの main を最新に更新します
	-	GitHub Desktop に戻ります
	-	左上のブランチメニューで main を選択します
	-	「Fetch Origin」→「Pull」ボタン を押して最新の main を取得します

	**ポイント** － main が最新になっていることを確認し、新しい作業に進めます。


#### ■ なぜブランチを切って更新し、その後 main にマージ（Merge）するのか？

直接 main に Push しない理由は大きく分けて3つほどあります。それぞれのポイントから説明していきましょう。

理由1: main を壊さないため
-	main は 安定したコードを保つ場所とします。
-	直接変更すると、バグが発生しても戻しにくいです。
-	開発用のブランチで作業すれば、問題が起きても main は安全です。

理由2: グループで作業しやすくするため
-	何人かが main を直接編集すると、変更が衝突しやすいです。
-	ブランチで分けて作業すれば、マージ前に調整できます。

理由3: 履歴をわかりやすく保つため
-	main に直接 Commit すると、履歴が複雑になりがちです。
-	ブランチを使うと「どんな作業をしていたか」明確に残ります。

**ポイント1** － main に直接 Commit → Push すると、その時点で GitHub 上の main も更新されるので、Pull Request を出す必要はありません（GitHub Desktop でも「Pull Request」ボタンは現れません）。Pull Request は、ブランチの変更を main にマージするためのものなので、そもそも main に直接 Push すれば、マージしなくてもよいからです。しかしながら、共同で作業をする場合には、ブランチを切るべきです。「幹（main）」がいきなり更新されてしまうよりも、いったん「枝（branch）」が更新され、それを共同で確認（Review）し終わってから、マージされるほうが衝突（Conflict）が生じにくくなります。

**ポイント2** － コード以外でも、リポートなどの添削をする場合がそうですが、ファイルを共同で編集することは多々あります。ゼミなどでその場で対応する場合には、いきなり main に Push するほうが（声をかけ合えばよいので）楽ですが、修正をする場合には、ブランチを切ってから Pull Request するのがよいでしょう。


### 2. Commit を整理する

GitHub Desktopでは、残念ながら、高度な履歴編集（コミットの統合 Squash や Push 後の並べ替え）はできません。ただし、以下のような基本的なコミットの整理は可能です。


#### Push した変更を完全に取り消して前のバージョンに戻す（Revert）

1.	GitHub Desktop の「History」タブを開きます
2.	取り消したいコミットを探します
3.	そのコミットを右クリック（二本指タップ）し、「Revert Changes in Commit」を選択します
4.	「Push origin」をクリックします

**ポイント1** － この方法では、取り消しの履歴が残るため、チームでの作業でも安全に使え、元に戻した変更を確認してから、もう一度コミットし直すことができます。

**ポイント2** － Push したものを完全になかったことにする（Force Reset をする）方法もあり、「Push origin」ボタンをクリックして、もしエラーが出たら「Force Push（強制Push）」を選択します。履歴ごと消して完全になかったことになります。ただし、Force Push はなるべく避け、履歴は残す Revert Changes in Commit を使うほうがよいでしょう。


#### Commit した変更（Push 前）を修正する（Amend）

「コミットメッセージを間違えた」、「ファイルを追加し忘れた」など、直前の Commit を修正（Amend）したいことがあります。

1.	変更を加えたファイルをステージング（追加）します
2.	コミットメッセージを修正（「Summary（コミットメッセージ）」を書き直す）します
3.	「Amend commit」ボタンを押します（直前のコミットが修正される）
4.	「Push origin」をクリック（Push 前であれば、そのまま反映され、Push 後の場合、強制 Push（force push）が必要）します


#### Commit した変更（Push 前）を取り消す（Undo）

「コミットしたけれど、もう一度やり直したい」、「間違ったファイルをコミットしてしまった」など、直前のコミットを取り消し（Undo）たいことがあります。

1.	GitHub Desktopの「History」タブを開きます
2.	直前のコミットを選択します
3.	「Undo」ボタンを押します
4.	変更が「Changes」タブに戻ります
5.	修正後、再コミットすればよい（Push 前であればローカルだけの変更なので、そのまま反映され、Push 済みの場合は「Revert」を使うほうがよい）です
