## GitHub Desktop の基本的な使いかた


GitHub Desktop でも、リポジトリの履歴を確認できます。具体的には、「History」タブを見ると、どんな変更をしたのかふりかえることが可能です。GitHub Desktop を使うと、コマンドを覚えなくても直感的に操作でき、基本的なブランチ管理から Pull Request 作成まで簡単にできるので、以下の手順の概略をまずは理解、実践していきましょう。


### 1. GitHub Desktop を使った履歴管理の概略と手順

1. ブランチを作成する
	-	GitHub Desktop を開く
	-	左上のブランチメニューをクリック
	-	「New Branch…」を選択
	-	ブランチ名を入力
	-	「Create Branch」を押す

	ポイント － main から新しい作業ブランチをつくる（ブランチを切る、ということが多いです）ことで、main を直接変更せずに済みます。


2. 変更を加えてコミットする
	-	コードを編集（CotEditor, VSCode などで開く）
	-	GitHub Desktop に戻ると、変更が検出される
	-	変更を確認し、「Summary」にコミットメッセージを入力
	-	「Commit to *****」をクリック

	ポイント － Commit は「ローカル保存」なので、まだ GitHub には反映されていません。


3. GitHub に Push する
	-	上部の「Push origin」ボタンをクリック
	-	GitHub にブランチがアップロードされる

	ポイント － Push すると、GitHub に変更が送信されますが、まだ main には反映されていません。


4. GitHubでPull Requestを作成
	-	GitHub Desktop の 「Create Pull Request」ボタンをクリック → すると GitHub の Pull Request ページが開く
	-	「Title」と「Description」を記入
	-	「Create Pull Request」 をクリック

	ポイント － Pull Requestをつくることで、変更を安全にレビューしてからmainにマージできます。


5. Pull Request をレビューして main にマージ
	-	GitHub上で、変更を確認
	-	問題がなければ、「Merge pull request」をクリック
	-	「Delete branch」 を押して、使い終わったブランチを削除

	ポイント － 用が済んだら、ブランチは捨てるほうがよいです。


6. ローカルの main を最新に更新
	-	GitHub Desktop に戻る
	-	左上のブランチメニューで main を選択
	-	「Fetch Origin」→「Pull」ボタン を押して最新の main を取得

	ポイント － main が最新になっていることを確認し、新しい作業に進めます。


#### なぜブランチを切って更新し、その後 main にマージするのか？

直接 main に Push しない理由を3つのポイントから説明します。

理由1: main を壊さないため
-	main は 安定したコードを保つ場所とします。
-	直接変更すると、バグが発生しても戻しにくいです。
-	開発用のブランチで作業すれば、問題が起きても main は安全です。

理由2: グループで作業しやすくするため
-	何人かが main を直接編集すると、変更が衝突しやすいです。
-	ブランチで分けて作業すれば、マージ前に調整できます。

理由3: 履歴をわかりやすく保つため
-	main に直接コミットすると、履歴が複雑になりがちです。
-	ブランチを使うと「どんな作業をしていたか」明確に残ります。

ポイント1 － main に直接 Commit → Push すると、その時点で GitHub 上の main も更新されるので、Pull Request を出す必要はありません（GitHub Desktop でも「Pull Request」ボタンは現れません）。Pull Request は、ブランチの変更を main にマージするためのものなので、そもそも main に直接 Push すれば、マージしなくてもよいからです。しかしながら、共同で作業をする場合には、ブランチを切るべきです。「幹（main）」がいきなり更新されてしまうよりも、いったん「枝（branch）」が更新され、それを共同で確認（review）し終わってから、マージされるほうが衝突（Conflict）が生じにくくなります。

ポイント2 － コード以外でも、リポートなどの添削をする場合がそうですが、ファイルを共同で編集することは多々あります。ゼミなどでその場で対応する場合には、いきなり main に Push するほうが（声をかけ合えばよいので）楽ですが、修正をする場合には、ブランチを切ってから Pull Request する（プルリクを送る、ということが多いです）のがよいでしょう。


### 2. Commit を整理する

GitHub Desktopでは、高度な履歴編集（コミットの統合や並べ替え）はできません。ただし、以下のような基本的なコミットの整理は可能です。　                                                                                                                                                                                                                                                                        


#### Push した変更を完全に取り消して前のバージョンに戻す（Revert）

1.	GitHub Desktop の「History」タブを開く
2.	取り消したいコミットを探す
3.	そのコミットを右クリック（二本指タップ）し、「Revert Changes in Commit」を選択
4.	「Push origin」をクリック

ポイント1 － この方法では、取り消しの履歴が残るため、チームでの作業でも安全に使え、元に戻した変更を確認してから、もう一度コミットし直すことができます。
ポイント2 － Push したものを完全になかったことにする（Force Reset をする）方法もあり、「Push origin」ボタンをクリックして、もしエラーが出たら「Force Push（強制Push）」を選択します。履歴ごと消して完全になかったことになります。ただし、Force Push はなるべく避け、履歴は残す Revert Changes in Commit を使うほうがよいでしょう。


#### Commit した変更（Push 前）を修正・取り消す（Amend, Undo）

「コミットメッセージを間違えた」、「ファイルを追加し忘れた」など、直前の Commit を修正（Amend）したいことがあります。

1.	変更を加えたファイルをステージング（追加）する
2.	コミットメッセージを修正（「Summary（コミットメッセージ）」を書き直す）
3.	「Amend commit」ボタンを押す（直前のコミットが修正される）
4.	「Push origin」をクリック（Push 前であれば、そのまま反映される。Push 後の場合、強制 Push（force push）が必要）

「コミットしたけれど、もう一度やり直したい」、「間違ったファイルをコミットしてしまった」など、直前のコミットを取り消し（Undo）たいことがあります。

1.	GitHub Desktopの「History」タブを開く
2.	直前のコミットを選択
3.	「Undo」ボタンを押す
4.	変更が「Changes」タブに戻る
5.	修正後、再コミットすればよい（Push 前であればローカルだけの変更なので、そのまま反映される。Push 済みの場合は「Revert」を使うほうがよい
